<?xml version="1.0" encoding="UTF-8"?><!--
    Copyright (c) 2012 SunGard CSA LLC and others.
    All rights reserved. This program and the accompanying materials
    are made available under the terms of the Eclipse Public License v1.0
    which accompanies this distribution, and is available at
    _http://www.eclipse.org/legal/epl-v10.html
   
    Contributors:
       SunGard CSA LLC - initial API and implementation and/or initial documentation
 -->

<project xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"
   xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <modelVersion>4.0.0</modelVersion>

   <parent>
      <groupId>org.eclipse.stardust.documentation</groupId>
      <artifactId>documentation-parent</artifactId>
      <version>4.1.0.v20161206-1511</version>
      <relativePath>../pom.xml</relativePath>
   </parent>

   <artifactId>org.eclipse.stardust.docs.dev</artifactId>

   <packaging>eclipse-plugin</packaging>

   <properties>
      <project.build.sourceEncoding>ISO-8859-1</project.build.sourceEncoding>
      <dest.additional.resources>${project.build.directory}/additional-resources</dest.additional.resources>
      <dest.javadoc.dir>${dest.additional.resources}/html/reference/api</dest.javadoc.dir>
      <dest.schema.dir>${dest.additional.resources}/html/schema</dest.schema.dir>
      <dest.xpdl.dir>${dest.additional.resources}/html/xpdl</dest.xpdl.dir>
   </properties>

   <dependencies>
      <dependency>
         <groupId>org.eclipse.stardust.examples</groupId>
         <artifactId>all-tutorials</artifactId>
         <version>${ipp.version}</version>
         <type>zip</type>
         <scope>runtime</scope>
      </dependency>
      <dependency>
         <groupId>org.eclipse.stardust.examples</groupId>
         <artifactId>dms</artifactId>
         <version>${ipp.version}</version>
         <type>zip</type>
         <scope>runtime</scope>
      </dependency>
      <dependency>
         <groupId>org.eclipse.stardust.examples</groupId>
         <artifactId>entity-data</artifactId>
         <version>${ipp.version}</version>
         <type>zip</type>
         <scope>runtime</scope>
      </dependency>
      <dependency>
         <groupId>org.eclipse.stardust.examples</groupId>
         <artifactId>ldap-sync</artifactId>
         <version>${ipp.version}</version>
         <type>zip</type>
         <scope>runtime</scope>
      </dependency>
      <dependency>
         <groupId>org.eclipse.stardust.examples</groupId>
         <artifactId>properties-sync</artifactId>
         <version>${ipp.version}</version>
         <type>zip</type>
         <scope>runtime</scope>
      </dependency>
      <dependency>
         <groupId>org.eclipse.stardust.examples</groupId>
         <artifactId>spi</artifactId>
         <version>${ipp.version}</version>
         <type>zip</type>
         <scope>runtime</scope>
      </dependency>
      <dependency>
         <groupId>org.eclipse.stardust.examples</groupId>
         <artifactId>jfc</artifactId>
         <version>${ipp.version}</version>
         <type>zip</type>
         <scope>runtime</scope>
      </dependency>
      <dependency>
         <groupId>org.eclipse.stardust.examples</groupId>
         <artifactId>weblogic-auth</artifactId>
         <version>${ipp.version}</version>
         <type>zip</type>
         <scope>runtime</scope>
      </dependency>
      <dependency>
         <groupId>org.eclipse.stardust.examples</groupId>
         <artifactId>ws-client-c-sharp</artifactId>
         <version>${ipp.version}</version>
         <type>zip</type>
         <scope>runtime</scope>
      </dependency>
      <dependency>
         <groupId>org.eclipse.stardust.examples</groupId>
         <artifactId>ws-client-java</artifactId>
         <version>${ipp.version}</version>
         <type>zip</type>
         <scope>runtime</scope>
      </dependency>
   </dependencies>

   <build>
      <filters>
         <filter>etc/product.properties</filter>
      </filters>

      <resources>
         <resource>
            <directory>${basedir}</directory>
            <filtering>true</filtering>
            <includes>
               <include>html/**/*.html</include>
               <include>html/**/*.htm</include>
               <include>html/**/*.js</include>
               <include>toc*.xml</include>
            </includes>
         </resource>
         <resource>
            <directory>${basedir}/html</directory>
            <filtering>false</filtering>
            <excludes>
               <exclude>**/*.html</exclude>
               <exclude>**/*.htm</exclude>
               <exclude>**/*.js</exclude>
            </excludes>
         </resource>
      </resources>
      <plugins>
         <plugin>
            <artifactId>maven-resources-plugin</artifactId>
            <configuration>
               <escapeString>$</escapeString>
            </configuration>
         </plugin>
         <plugin>
            <groupId>org.eclipse.tycho</groupId>
            <artifactId>tycho-packaging-plugin</artifactId>
            <configuration>
               <additionalFileSets>
                  <fileSet>
                     <directory>${project.build.outputDirectory}</directory>
                     <includes>
                        <include>html/**/*</include>
                        <include>toc*.xml</include>
                     </includes>
                  </fileSet>
                  <fileSet>
                     <directory>${dest.additional.resources}</directory>
                     <includes>
                        <include>html/**/*</include>
                        <include>toc*.xml</include>
                     </includes>
                  </fileSet>
                  <fileSet>
                     <directory>${project.build.directory}/overlay-resources</directory>
                     <excludes>
                        <exclude>**/*.properties.orig</exclude>
                        <exclude>**/*.xml.orig</exclude>
                     </excludes>
                  </fileSet>
               </additionalFileSets>
            </configuration>
         </plugin>
         <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-dependency-plugin</artifactId>
            <executions>
               <execution>
                  <id>embed-jars-no-version-tutorials</id>
                  <phase>generate-resources</phase>
                  <goals>
                     <goal>copy-dependencies</goal>
                  </goals>
                  <configuration>
                     <stripVersion>true</stripVersion>                     
                     <includeArtifactIds>all-tutorials</includeArtifactIds>
                     <outputDirectory>${dest.additional.resources}/html/examples/tutorials</outputDirectory>
                  </configuration>
               </execution>
               <execution>
                  <id>embed-jars-no-version-dms</id>
                  <phase>generate-resources</phase>
                  <goals>
                     <goal>copy-dependencies</goal>
                  </goals>
                  <configuration>
                     <stripVersion>true</stripVersion>
                     <includeArtifactIds>dms</includeArtifactIds>
                     <outputDirectory>${dest.additional.resources}/html/examples/dms</outputDirectory>
                  </configuration>
               </execution>
               <execution>
                  <id>embed-jars-no-version-entity-data</id>
                  <phase>generate-resources</phase>
                  <goals>
                     <goal>copy-dependencies</goal>
                  </goals>
                  <configuration>
                     <stripVersion>true</stripVersion>
                     <includeArtifactIds>entity-data</includeArtifactIds>
                     <outputDirectory>${dest.additional.resources}/html/examples/entity-data</outputDirectory>
                  </configuration>
               </execution>
               <execution>
                  <id>embed-jars-no-version-jfc</id>
                  <phase>generate-resources</phase>
                  <goals>
                     <goal>copy-dependencies</goal>
                  </goals>
                  <configuration>
                     <stripVersion>true</stripVersion>
                     <includeArtifactIds>jfc</includeArtifactIds>
                     <outputDirectory>${dest.additional.resources}/html/examples/jfc</outputDirectory>
                  </configuration>
               </execution>
               <execution>
                  <id>embed-jars-no-version-ldap-sync</id>
                  <phase>generate-resources</phase>
                  <goals>
                     <goal>copy-dependencies</goal>
                  </goals>
                  <configuration>
                     <stripVersion>true</stripVersion>
                     <includeArtifactIds>ldap-sync</includeArtifactIds>
                     <outputDirectory>${dest.additional.resources}/html/examples/ldap-sync</outputDirectory>
                  </configuration>
               </execution>
               <execution>
                  <id>embed-jars-no-version-properties-sync</id>
                  <phase>generate-resources</phase>
                  <goals>
                     <goal>copy-dependencies</goal>
                  </goals>
                  <configuration>
                     <stripVersion>true</stripVersion>
                     <includeArtifactIds>properties-sync</includeArtifactIds>
                     <outputDirectory>${dest.additional.resources}/html/examples/properties-sync</outputDirectory>
                  </configuration>
               </execution>
               <execution>
                  <id>embed-jars-no-version-spi</id>
                  <phase>generate-resources</phase>
                  <goals>
                     <goal>copy-dependencies</goal>
                  </goals>
                  <configuration>
                     <stripVersion>true</stripVersion>
                     <includeArtifactIds>spi</includeArtifactIds>
                     <outputDirectory>${dest.additional.resources}/html/examples/spi</outputDirectory>
                  </configuration>
               </execution>
               <execution>
                  <id>embed-jars-no-version-weblogic-auth</id>
                  <phase>generate-resources</phase>
                  <goals>
                     <goal>copy-dependencies</goal>
                  </goals>
                  <configuration>
                     <stripVersion>true</stripVersion>
                     <includeArtifactIds>weblogic-auth</includeArtifactIds>
                     <outputDirectory>${dest.additional.resources}/html/examples/weblogic-auth</outputDirectory>
                  </configuration>
               </execution>
               <execution>
                  <id>embed-jars-no-version-ws-client-c-sharp</id>
                  <phase>generate-resources</phase>
                  <goals>
                     <goal>copy-dependencies</goal>
                  </goals>
                  <configuration>
                     <stripVersion>true</stripVersion>
                     <includeArtifactIds>ws-client-c-sharp</includeArtifactIds>
                     <outputDirectory>${dest.additional.resources}/html/examples/ws-client-c-sharp</outputDirectory>
                  </configuration>
               </execution>
               <execution>
                  <id>embed-jars-no-version-ws-client-java</id>
                  <phase>generate-resources</phase>
                  <goals>
                     <goal>copy-dependencies</goal>
                  </goals>
                  <configuration>
                     <stripVersion>true</stripVersion>
                     <includeArtifactIds>ws-client-java</includeArtifactIds>
                     <outputDirectory>${dest.additional.resources}/html/examples/ws-client-java</outputDirectory>
                  </configuration>
               </execution>
               <execution>
                  <id>extract-javadocs</id>
                  <phase>generate-resources</phase>
                  <goals>
                     <goal>unpack</goal>
                  </goals>
                  <configuration>
                     <outputDirectory>${dest.javadoc.dir}</outputDirectory>
                     <artifactItems>
                        <artifactItem>
                           <groupId>org.eclipse.stardust.engine</groupId>
                           <artifactId>carnot-base</artifactId>
                           <version>${ipp.version}</version>
                           <classifier>javadoc</classifier>
                           <type>jar</type>
                           <outputDirectory>${dest.javadoc.dir}/common</outputDirectory>
                        </artifactItem>
                        <artifactItem>
                           <groupId>org.eclipse.stardust.engine</groupId>
                           <artifactId>carnot-engine</artifactId>
                           <version>${ipp.version}</version>
                           <classifier>javadoc</classifier>
                           <type>jar</type>
                           <outputDirectory>${dest.javadoc.dir}/engine</outputDirectory>
                        </artifactItem>
                        <artifactItem>
                           <groupId>org.eclipse.stardust.engine</groupId>
                           <artifactId>stardust-engine-ws-cxf</artifactId>
                           <version>${ipp.version}</version>
                           <classifier>javadoc</classifier>
                           <type>jar</type>
                           <outputDirectory>${dest.javadoc.dir}/wsengine</outputDirectory>
                        </artifactItem>
                        <artifactItem>
                           <groupId>org.eclipse.stardust.engine</groupId>
                           <artifactId>carnot-spring</artifactId>
                           <version>${ipp.version}</version>
                           <classifier>javadoc</classifier>
                           <type>jar</type>
                           <outputDirectory>${dest.javadoc.dir}/spring</outputDirectory>
                        </artifactItem>
                     </artifactItems>
                     <includes>**</includes>
                  </configuration>
               </execution>
               <execution>
                  <id>extract-schema</id>
                  <phase>generate-resources</phase>
                  <goals>
                     <goal>unpack</goal>
                  </goals>
                  <configuration>
                     <artifactItems>
                        <artifactItem>
                           <groupId>org.eclipse.stardust.engine</groupId>
                           <artifactId>carnot-engine</artifactId>
                           <version>${ipp.version}</version>
                        </artifactItem>
                     </artifactItems>
                     <outputDirectory>${dest.schema.dir}</outputDirectory>
                     <includes>
                        org/eclipse/stardust/engine/core/model/beans/WorkflowModel.dtd,
                        org/eclipse/stardust/engine/core/model/beans/WorkflowModel.xsd,
                        org/eclipse/stardust/engine/core/model/xpdl/carnot-xpdl.xsd
                     </includes>
                  </configuration>
               </execution>
               <execution>
                  <id>extract-xpdl</id>
                  <phase>generate-resources</phase>
                  <goals>
                     <goal>unpack</goal>
                  </goals>
                  <configuration>
                     <artifactItems>
                        <artifactItem>
                           <groupId>org.eclipse.stardust.engine</groupId>
                           <artifactId>carnot-engine</artifactId>
                           <version>${ipp.version}</version>
                        </artifactItem>
                     </artifactItems>
                     <outputDirectory>${dest.xpdl.dir}</outputDirectory>
                     <includes>
                        org/eclipse/stardust/engine/core/model/xpdl/xpdl.xsd,
                        org/eclipse/stardust/engine/core/model/xpdl/xpdl.extensions.xsd
                     </includes>
                  </configuration>
               </execution>
            </executions>
         </plugin>
         <plugin>
            <artifactId>maven-antrun-plugin</artifactId>
            <dependencies>
               <dependency>
                  <groupId>org.apache.ant</groupId>
                  <artifactId>ant</artifactId>
                  <version>${apache.ant.version}</version>
               </dependency>
               <dependency>
                  <groupId>xsddoc</groupId>
                  <artifactId>xsddoc</artifactId>
                  <version>${xsddoc.version}</version>
               </dependency>
               <dependency>
                  <groupId>xalan</groupId>
                  <artifactId>xalan</artifactId>
                  <version>${xalan.version}</version>
               </dependency>
            </dependencies>
            <executions>
               <execution>
                  <id>make-doc</id>
                  <phase>generate-resources</phase>
                  <goals>
                     <goal>run</goal>
                  </goals>
                  <configuration>
                     <target>
                        <move todir="${dest.schema.dir}">
                           <fileset
                              dir="${dest.schema.dir}/org/eclipse/stardust/engine/core/model/beans"
                              includes="*" />
                           <fileset
                              dir="${dest.schema.dir}/org/eclipse/stardust/engine/core/model/xpdl"
                              includes="*" />
                        </move>
                        <move todir="${dest.xpdl.dir}">
                           <fileset
                              dir="${dest.xpdl.dir}/org/eclipse/stardust/engine/core/model/xpdl/"
                              includes="*" />
                        </move>
                        <taskdef name="xsddoc" classname="net.sf.xframe.xsddoc.Task"
                           loaderref="xsddoc.classloader" uri="xsddoc:net.sf.xframe.xsddoc">
                           <classpath refid="maven.plugin.classpath" />
                        </taskdef>
                        <xd:xsddoc xmlns:xd="xsddoc:net.sf.xframe.xsddoc" out="${dest.schema.dir}"
                           file="${dest.schema.dir}/WorkflowModel.xsd" doctitle="Carnot Schema Documentation">
                        </xd:xsddoc>
                        <delete includeEmptyDirs="true">
                           <fileset dir="${dest.schema.dir}/org" />
                           <fileset dir="${dest.xpdl.dir}" />
                        </delete>

                     </target>
                  </configuration>
               </execution>
            </executions>
         </plugin>
         <plugin>
            <groupId>org.codehaus.gmaven</groupId>
            <artifactId>gmaven-plugin</artifactId>
            <version>1.5</version>
            <configuration>
               <providerSelection>1.8</providerSelection>
            </configuration>
            <executions>
               <execution>
                  <id>toc-generation</id>
                  <!-- must be executed after resources:resources -->
                  <phase>process-resources</phase>
                  <goals>
                     <goal>execute</goal>
                  </goals>
                  <configuration>
                     <properties>
                        <dest.toc.dir>${dest.additional.resources}</dest.toc.dir>
                     </properties>
                     <source>${pom.basedir}/etc/toc-generator.groovy</source>
                  </configuration>
               </execution>
            </executions>
         </plugin>
      </plugins>
      <pluginManagement>
         <plugins>
            <plugin>
               <groupId>org.eclipse.tycho</groupId>
               <artifactId>tycho-packaging-plugin</artifactId>
               <configuration>
                  <strictBinIncludes>false</strictBinIncludes>
               </configuration>
            </plugin>
         </plugins>
      </pluginManagement>
   </build>
</project>
