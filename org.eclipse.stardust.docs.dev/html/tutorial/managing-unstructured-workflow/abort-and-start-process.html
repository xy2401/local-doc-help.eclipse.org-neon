<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="STYLESHEET" href="../../styles/carnot.css"
	charset="ISO-8859-1" type="text/css">
<title>Aborting and Starting Processes</title>
<script language="JavaScript" src="../../styles/naviLine.js"
	type="text/javascript"></script>
</head>
<body>
<script language="JavaScript" type="text/javascript">
<!--
writeNavigation("Aborting and Joining Processes",
      "extracting-pages.html","abort-and-join-process.html",
		"../tut-preface.htm","Tutorials",
		"derive-procs-preface.html","Managing Unstructured Workflows");
-->
</script>

<h1>Aborting and Starting Processes</h1>
<p>This tutorial describes how to abort an existing process instance and start another process instance. 
Then we check whether the documents attached to the source process instance are copied in the target process instance.</p>
<p>In an organization, process instances are started in the incorrect process definitions.
This resulted into manual download and upload of the documents. So, the organization has requested
an enhancement to the existing functionality.
For detail scenario refer to the 
<a href="PLUGINS_ROOT/org.eclipse.stardust.docs.dev/html/concepts/executing-workflow/abort-and-start-usage.html#usage">Common Usage Pattern</a>
section of the 
<a href="PLUGINS_ROOT/org.eclipse.stardust.docs.dev/html/concepts/executing-workflow/abort-and-start-usage.html">Aborting and Starting Processes
</a> 
chapter of the 
<a href="PLUGINS_ROOT/org.eclipse.stardust.docs.dev/html/concepts/key-concepts.html"> Concepts</a> handbook.</p>
<p>For details on the abort and start functionality, refer to 
<a href="PLUGINS_ROOT/org.eclipse.stardust.docs.enduser/html/handbooks/execution-clients/detail-views/switch-process-dialog.html">
Aborting a Process and Starting a new Instance</a> chapter of the
<a href="PLUGINS_ROOT/org.eclipse.stardust.docs.enduser/html/handbooks/toc.html">End User Handbook</a>.</p>

<p>This tutorial covers the following:</p>
<ul>
	<li><a href="#import">Importing the Example Model</a></li>
	<li><a href="#deploy">Deploying and Running the Model</a></li>
	<li><a href="#execute">Executing the Workflow</a>
	<ul><li><a href="#asp">Aborting and Starting Processes</a>
		<ul><li><a href="#link">Viewing the Linking between Processes</a></li>
	  <li><a href="#data">Viewing the Data</a></li>
	  <li><a href="#his">Viewing the Process History</a></li>
   </ul></li></ul></li>
</ul>
<p>So, let's abort the <strong>IRA</strong> and the <strong>Loan</strong> process instances of the example model. 
After the abort and start operation we need to check if the document attached with the <strong>IRA</strong>
process is copied to the <strong>Loan</strong> process.</p>
<h2 id="import">Importing the Example Model</h2>
<p>Use the provided <strong>AbortStart</strong> example model which contains 
appropriate declarative security.</p> 
<ol>	
	<li>Download the following ZIP file which contains the example model in 
	folder <code>managing-unstructured-workflow</code>:
	<p class="ind">
   <a href="../../examples/tutorials/all-tutorials.zip">all-tutorials.zip</a>
   <br></p></li>
	<li>Create a dynamic Web project designed to deploy Stardust
	 models to run in the Stardust Portal.
	For detailed information on creating dynamic Web projects for usage with
	the Stardust Portal, please refer to the <a
	href="PLUGINS_ROOT/org.eclipse.stardust.docs.wst/html/wst-integration/toc.html">
	Rapid Application Development</a> guide.</li>

	<li>Right-click the project and select 
	<strong>Import &gt; Process Manager Wizards &gt; Process Model</strong>.
	Click <strong>Next</strong> and browse to the location of the example
	model extracted from the zip file.</li>
	<li>Make sure that the Bank Executive role has the <strong>Abort Process Instances</strong>
	permission granted for the IRA process.
	<p class="image"><img src="images/tut-ira.png" alt="IRA - Abort Process Instance"> <br>
	<strong>Figure:</strong> IRA - Abort Process Instance</p></li>
	<li>Also, make sure that IRA and Loan process support attachments.
	
	<p class="image"><img src="images/process-attachment.png" alt="Process Supports Attachments"> <br>
	<strong>Figure:</strong> Process Supports Attachments - IRA</p></li>
</ol>
<h2 id="deploy">Deploying and Running the Model</h2>
<p>Perform the following steps to deploy the model and run
the project in the Stardust Portal:</p>
<ol>
	<li>Start the server and deploy the model. For details on how to
	deploy a model, please refer to the chapter <a
		href="../support-case/tut-main-12.htm">Deploying a Workflow Model</a> of the <a
		href="../support-case/support-case-preface.htm">Support Case Example</a>.</li>
	<li>Start the Stardust Portal as described in the chapter <a
		href="PLUGINS_ROOT/org.eclipse.stardust.docs.enduser/html/handbooks/execution-clients/portal-login.html">
	Logging in to the Stardust Portal</a> of the <a
		href="PLUGINS_ROOT/org.eclipse.stardust.docs.enduser/html/handbooks/toc.html">End User
	Handbook</a>. Login as administrator (<tt>motu/motu</tt>). You can use the
	Shift-F8 shortcut key.</li>
	
	
</ol>

<h2 id="execute">Executing the Workflow</h2>
<ol>
	<li>Switch to the <strong>Participant Manager View</strong> of the 
	<strong>Administration Perspective</strong>.</li>
	<li>Create a user and assign him the role <strong>Bank Executive</strong>. 
	For details on how to create a new user, please refer to section <a
		href="PLUGINS_ROOT/org.eclipse.stardust.docs.enduser/html/handbooks/execution-clients/admin-portal/admin-portal-participant.html#createUser">
	Creating a new User</a> of chapter <a
		href="PLUGINS_ROOT/org.eclipse.stardust.docs.enduser/html/handbooks/execution-clients/admin-portal/admin-portal-participant.html">
	Creating and Editing User Accounts</a> of the <a
		href="PLUGINS_ROOT/org.eclipse.stardust.docs.enduser/html/handbooks/execution-clients/carnot-clients.html">
	Stardust Portal</a> documentation.
	<p class="image"><img src="images/tut-ira-role.png" alt="Participant - Role 1"> <br>
	<strong>Figure:</strong> Participant - Role 1</p></li>
	<li>Logout and login again as the new user.</li>
	
</ol>
<h3 id="asp">Aborting and Starting Processes</h3>
<ol>
	<li>In the <strong>Workflow Perspective</strong>, start the process <strong>IRA</strong></li>
	<li>In the toolbar, click <strong>Process Documents</strong> icon and choose <strong>Upload Document</strong>
	<p class="image"><img src="images/tut-upload-doc.png" alt="Upload Document"> <br>
	<strong>Figure:</strong> Upload Document</p></li>
	<li>In the <strong>Upload File</strong> dialog, browse to the location of 
	the document and click <strong>Upload</strong>. You can upload document of your choice.</li>
	<li>Now open the <strong>Process Details</strong> view for the 
	<strong>IRA</strong> process instance.</li>
	<li>Expand the <strong>Process Documents</strong> panel.
	The uploaded document is displayed under <strong>Process Attachments</strong>.
	
	<p class="image"><img src="images/ira-pd.png" alt="IRA - Process Attachment"> <br>
	<strong>Figure:</strong> IRA - Process Attachment</p></li>
	<li>In the Activity Instance view, click the down-arrow displayed next to the Abort icon and 
	choose <strong>Abort Process and Start</strong> option.
	
	<p class="image"><img src="images/abort-start-button.png" alt="IRA - Abort Process and Start"> <br>
	<strong>Figure:</strong> IRA - Abort Process and Start</p>
	<p>The <strong>Abort Process and Start</strong> dialog is displayed.</p></li>
	
	<li>Select the Loan process from the <strong>Start Process</strong> drop-down list.
   It lists all processes from all active models that are startable and you are authorized to start,
   including the most recent version of the same model.</li>
	<li>Enter appropriate comment in the <strong>Link Comment</strong> text box.
	<p class="image"><img src="images/abort-start.png" alt="Abort Process and Start"> <br>
	<strong>Figure:</strong> Abort Process and Start</p></li>
	<li>Click <strong>OK</strong></li>
	<li>In the <strong>Abort Process and Start</strong> confirmation dialog, click <strong>Yes</strong> 
	to view the process details of the newly started Loan process instance.
		<p class="image"><img src="images/abortstart-confirm.png" alt="Abort Process and Start Confirmation"> <br>
	<strong>Figure:</strong> Abort Process and Start Confirmation</p></li>
	
</ol>
<h4 id="link">Viewing the Linking between Processes</h4>
<p>In the Worklist view, the newly started process Loan gets displayed.</p>
<p class="image"><a href="images/abort-start-wklist-orgsize.png" target="_blank">
<img src="images/abort-start-wklist.png" alt="Worklist"></a><br>
<strong>Figure:</strong> Worklist View</p>
<p>To view the linking between the processes, perform the following steps:</p>
<ol>

	<li>In the <strong>Actions</strong> column menu of the activity, select the 
   <img class="noborder" src="../common-images/proc-details-icon.png"> <strong>Process Details</strong> option.
	<p class="image"><img src="images/actions.png" alt="Process Details - Loan"><br>
	<strong>Figure:</strong> Process Details - Loan</p></li>
	
	<li>Expand the <strong>Linked Processes</strong> panel for the target process - Loan 
	<p class="image"><img src="images/linked-pro.png" alt="Linked Processes"> <br>
	<strong>Figure:</strong> Linked Process with Target Process</p>
	<p>The link to the source process instance is displayed.</p>
	<p class="image"><img src="images/linkp.png" alt="Linked Process - IRA"> <br>
	<strong>Figure:</strong> Linked Process with Target Process - IRA</p></li>
	<li>In the <strong>Linked Processes</strong> panel of the target process Loan, 
	click the IRA process in the <strong>Process</strong> column.
	<p class="image"><img src="images/linkedIRA.png" alt="Linked Process - Loan"> <br>
	<strong>Figure:</strong> Linked Process - IRA</p>
	<p>The process details of the source process IRA get displayed.</p></li>
	<li>Expand the <strong>Linked Processes</strong> panel of the source process IRA. 
	The link to target process Loan is displayed.
	<p class="image"><img src="images/ira-details.png" alt="Linked Process - Loan"> <br>
	<strong>Figure:</strong> Linked Process with Source Process - Loan</p></li>
	
</ol>
<h4 id="data">Viewing the Data</h4>
<p>Expand the <strong>Process Documents</strong> panel for the target process - Loan</p>
<p class="image"><img src="images/pd.png" alt="Process Documents"> <br>
<strong>Figure:</strong> Process Documents</p>
<p>The document from the source process instance IRA gets copied to the target process instance Loan. 
<p>For details on the Copy Data semantics, please refer the chapter
<a href="../../concepts/executing-workflow/data-copy-semantics.html">Data Copy and Mapping Semantics</a>
of the Stardust <a href="../../concepts/key-concepts.html">Concepts</a> handbook.</p>
<p class="image"><img src="images/loan-attach.png" alt="Loan - Process Attachment"> <br>
<strong>Figure:</strong> Attached Document to Target Process - Loan</p>
<h4 id="his">Viewing the Process History</h4>
<p>Expand the <strong>Process History</strong> panel for target process - Loan</p>
<p class="image"><img src="images/loan-history.png" alt="Process History - Loan"> <br>
	<strong>Figure:</strong> Process History - Loan</p>
<p>Note that in the process history of the target process Loan, details of the source process are not displayed.</p>	

<p class="image"><a href="images/process-history_orgSize.png" target="_blank">
<img src="images/process-history.png" alt="Process History - Loan"></a><br>
	<strong>Figure:</strong> Process History - Loan - Target Process</p>
<p>Similarly, if you open the process history of the source process IRA, the process history of the target process is not shown.</p>

<script language="JavaScript" type="text/javascript">
<!-- 
writeFooter(); 
-->
</script>
</body>
</html>
