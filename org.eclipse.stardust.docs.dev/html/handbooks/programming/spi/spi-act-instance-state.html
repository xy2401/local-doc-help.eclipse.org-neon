<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<title>Monitoring Activity Instance State Changes</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link rel="stylesheet" type="text/css" href="../../../styles/carnot.css"
    title="Style">
<script language="JavaScript" src="../../../styles/naviLine.js"
    type="text/javascript"></script>
</head>
<body>
<script language="JavaScript" type="text/javascript">
<!--
	writeNavigation("Monitoring Process Execution",
	"pg-worklist-monitoring.html","spi-proc-exe.html",
      "../../handbooks.htm","Developer Handbook",
      "../pg-preface.htm","Programming Guide",
      "spi-toc.html","SPI");
 -->
</script>
<h1>Monitoring Activity Instance State Changes</h1>
<p>The Stardust provides the Service Provider Interface <tt>IActivityInstanceMonitor</tt>
to monitor activity state changes.
Please refer to the according JavaDoc
<a href="../../../reference/api/engine/org/eclipse/stardust/engine/core/spi/monitoring/IActivityInstanceMonitor.html">
IActivityInstanceMonitor</a> for detailed information on the interface.</p>
<pre>
package org.eclipse.stardust.engine.core.spi.monitoring;

import org.eclipse.stardust.common.annotations.SPI;

import org.eclipse.stardust.common.annotations.Status;
import org.eclipse.stardust.common.annotations.UseRestriction;
import org.eclipse.stardust.engine.core.runtime.beans.IActivityInstance;

@SPI(useRestriction = UseRestriction.Public, status = Status.Stable)
public interface IActivityInstanceMonitor
{
   void activityInstanceStateChanged(IActivityInstance activity, int newState);
}</pre>
<p>The interface propagates a change of the activity instance state.</p>
<h2>Creating a custom Implementation</h2>
<p>To implement the 
<a href="../../../reference/api/engine/org/eclipse/stardust/engine/core/spi/monitoring/IActivityInstanceMonitor.html">IActivityInstanceMonitor</a>
interface and publish the implementation to the engine, a file named by the interface's 
factory has to be created in the <tt>/META-INF/services</tt> folder of the jar.
Perform the following steps:</p>
<ol>
   <li>Implement the interface as shown below</li>
   <li>Create a text file named <tt>org.eclipse.stardust.engine.core.spi.monitoring.IActivityInstanceMonitor</tt>.
    The file contents needs to be the fully qualified name of your implementation class, 
    e.g. <tt>org.eclipse.stardust.example.ActivityInstanceMonitorImpl</tt>.</li>
   <li>Place the file into the <tt>META-INF/services</tt> folder of the jar that will contain your implementation class</li>
</ol>
<p>Refer to chapter
<a href="pg-spi-tenant.html">Configuring SPI Implementations per Tenant</a> for details on
how to configure custom Service Provider Interface implementations.</p>
<pre>
package org.eclipse.stardust.example;
 
import org.eclipse.stardust.engine.core.runtime.beans.IActivityInstance;
import org.eclipse.stardust.engine.core.spi.monitoring.IActivityInstanceMonitor;

public class ActivityInstanceMonitorImpl implements IActivityInstanceMonitor {

    @Override
    public void activityInstanceStateChanged(IActivityInstance activity, int newState) {
    }
}
</pre>

<script language="JavaScript" type="text/javascript">
<!--
writeFooter();
-->
</script>
</body>
</html>
